(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{374:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-æ¦‚å¿µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¦‚å¿µ"}},[t._v("#")]),t._v(" 1. æ¦‚å¿µ")]),t._v(" "),s("p",[t._v("é›ªèŠ±ç®—æ³•æ˜¯ä¸€ç§ç”Ÿæˆå”¯ä¸€IDçš„ç®—æ³•ï¼Œä¸»è¦ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚å®ƒå¯ä»¥åœ¨ä¸ä¾èµ–æ•°æ®åº“ç­‰å…¶ä»–è®¾å¤‡çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆå…¨å±€å”¯ä¸€çš„IDã€‚")]),t._v(" "),s("p",[t._v("é›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ ID ä¸º 64ä½æ•´æ•°ï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://typorehwf.oss-cn-chengdu.aliyuncs.com/image-20231109202639481.png",alt:"image-20231109202639481"}})]),t._v(" "),s("p",[t._v("å›¾ç‰‡å¤ªä¸æ¸…æ™°äº†ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡")]),t._v(" "),s("ul",[s("li",[t._v("1 ä¸ªç¬¦å·ä½ 0ï¼šç”Ÿæˆçš„ ID éœ€è¦æ˜¯æ­£æ•´æ•°ï¼Œæ‰€ä»¥ç¬¦å·ä½å¿…é¡»æ˜¯0")]),t._v(" "),s("li",[t._v("41ä¸ªæ—¶é—´æˆ³ ï¼šä¸€èˆ¬ä½¿ç”¨æ¯«ç§’ä¸ºæ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨æ¯«ç§’ï¼Œ2^41 â— (12 * 30 * 24 * 60 * 60 * 1000) â‰ˆ 70ï¼Œå¯ä»¥ä½¿ç”¨70å¹´")]),t._v(" "),s("li",[t._v("10ä¸ªæœºå™¨æ ‡è¯† ï¼šå…¶å®å¯ä»¥åˆ†å¼€ï¼Œ5 + 5ï¼Œæ•°æ®ä¸­å¿ƒæ ‡è¯† + æœºå™¨æ ‡è¯†ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æŒ‡å®š10ä½æ¥æ ‡è¯†ä¸€ä¸ªæœºå™¨ã€‚")]),t._v(" "),s("li",[t._v("12ä¸ªè®¡æ•°åºå· ï¼šè®¡æ•°åºå·è¡¨ç¤ºåœ¨æŒ‡å®šçš„æ—¶é—´æˆ³å†…èƒ½ç”Ÿæˆçš„æœ€å¤šIDæ•°ã€‚è‹¥ä½¿ç”¨æ¯«ç§’ä¸ºæ—¶é—´æˆ³ï¼Œåˆ™è¡¨ç¤º 1æ¯«ç§’æœ€å¤šç”Ÿæˆ 2^12 ä¸ªåºå·ã€‚")])]),t._v(" "),s("p",[t._v("ä½†æ˜¯å˜ï¼Œç®—æ³•æ˜¯æ­»çš„äººæ˜¯æ´»çš„ï¼Œé›ªèŠ±ç®—æ³•åªæ˜¯æä¾›äº†ä¸€ä¸ªæ€æƒ³ï¼Œå°†64ä½æ•´æ•°æ‹†å¼€å„ä¸ªéƒ¨åˆ†åˆ†åˆ«è¡¨ç¤ºä¸åŒçš„æ„æ€ï¼Œå†é€šè¿‡æ—¶é—´æˆ³æ¥å®ç°é€’å¢ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘çš„æœºå™¨æ•°é‡ä¸å¤šï¼Œå¯ä»¥åªç”¨ 5 ä¸ªæ¯”ç‰¹è¡¨ç¤ºæœºå™¨ï¼Œçœä¸‹æ¥é‚£5ä¸ªå¯ä»¥ç”¨äºåŠ å¤§æ—¶é—´ç²¾åº¦ï¼Œä¹Ÿå¯ä»¥ç”¨äºåŠ å¤§å•ä½æ—¶é—´å†…åºå·æ•°é‡ã€‚åæ­£çœ‹ä½ æ€ä¹ˆå®ç°å–½~")]),t._v(" "),s("p",[t._v("å¦‚æœä½¿ç”¨å¼€æºçš„ Snowflake ç”Ÿæˆå™¨ï¼Œé‚£ä¹ˆç”Ÿæˆè§„åˆ™å°±è·Ÿä¸Šé¢è¯´çš„ä¸€æ ·ã€‚")]),t._v(" "),s("p",[t._v("Snowflakeä¹Ÿå¹¶ä¸å…¨æ˜¯ä¼˜ç‚¹ï¼Œç¼ºç‚¹å°±æ˜¯å®ƒæ˜¯æ ¹æ®æ—¶é—´æˆ³ç”ŸæˆIDçš„ï¼Œä½†æ˜¯å„ä¸ªæœºå™¨ä¸Šçš„æ—¶é’Ÿå¯èƒ½ä¸ä¸€è‡´ï¼ŒåŒæ—¶å¦‚æœä¸€ä¸ªæœºå™¨çš„æ—¶é—´é’Ÿå›æ‹¨ï¼Œä¼šæœ‰IDé‡å¤æˆ–è€…ä¹±åºçš„å¯èƒ½ã€‚æ€ä¹ˆè§£å†³è¿™ç§é—®é¢˜å‘¢ï¼Ÿåˆ©ç”¨æ‹“å±•ä½ï¼Œå›æ‹¨ä¹‹åå†æ‰©å±•ä½ä¸ŠåŠ 1å°±å¯ä»¥äº†ï¼Œè¿™æ ·IDä¾ç„¶å¯ä»¥ä¿æŒå”¯ä¸€ã€‚ä½†æ˜¯æ‰¾ä¸ªè¦æ±‚æˆ‘ä»¬æå‰é¢„ç•™å‡ºä½æ•°ï¼Œè¦ä¹ˆä»æœºå™¨idä¸­ï¼Œè¦ä¹ˆä»åºåˆ—å·ä¸­ï¼Œè…¾å‡ºä¸€å®šçš„ä½ï¼Œåœ¨æ—¶é—´å›æ‹¨çš„æ—¶å€™ï¼Œè¿™ä¸ªä½ç½®+1.")]),t._v(" "),s("h2",{attrs:{id:"_2-å®ç°snowflake"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®ç°snowflake"}},[t._v("#")]),t._v(" 2. å®ç°Snowflake")]),t._v(" "),s("p",[t._v("å¼€æºçš„Snowflakeå¾ˆå¤šï¼Œå°±ä¸å†ä»‹ç»äº†ï¼Œhutoolå°±å¯ä»¥ç”¨ï¼Œç™¾åº¦ã€ç¾å›¢ä¹Ÿæœ‰ç›¸å…³çš„å®ç°ã€‚")]),t._v(" "),s("p",[t._v("åœ¨è¿™é‡Œæ”¾ä¸€ä¸ªç½‘ä¸Šçœ‹åˆ°çš„ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SnowFlakeUtil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * åˆå§‹æ—¶é—´æˆ³ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ›´æ”¹æ—¶é—´æˆ³\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" twepoch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11681452025134L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æœºå™¨IDæ‰€å ä½æ•°ï¼Œé•¿åº¦ä¸º5ä½\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" workerIdBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ•°æ®æ ‡è¯†IDæ‰€å ä½æ•°ï¼Œé•¿åº¦ä½5ä½\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" datacenterIdBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ”¯æŒçš„æœ€å¤§æœºå™¨idï¼Œç»“æœæ˜¯31 (è¿™ä¸ªç§»ä½ç®—æ³•å¯ä»¥å¾ˆå¿«çš„è®¡ç®—å‡ºå‡ ä½äºŒè¿›åˆ¶æ•°æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§åè¿›åˆ¶æ•°)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" maxWorkerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" workerIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ”¯æŒçš„æœ€å¤§æ•°æ®æ ‡è¯†idï¼Œç»“æœæ˜¯31\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" maxDatacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" datacenterIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * åºåˆ—åœ¨idä¸­å çš„ä½æ•°ï¼Œé»˜è®¤12ä½\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sequenceBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å·¥ä½œæœºå™¨IDå‘å·¦ç§»12ä½\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" workerIdShift "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sequenceBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ•°æ®æ ‡è¯†idå‘å·¦ç§»17ä½(12+5)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" dataCenterIdShift "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sequenceBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" workerIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ—¶é—´æˆªå‘å·¦ç§»22ä½(5+5+12)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" timestampLeftShift "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sequenceBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" workerIdBits "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" datacenterIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * åºåˆ—å·æœ€å¤§å€¼; ç”Ÿæˆåºåˆ—çš„æ©ç ï¼Œè¿™é‡Œä¸º4095 (0b111111111111=0xfff=4095)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sequenceMask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" sequenceBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * å·¥ä½œæœºå™¨ID(0~31)ï¼Œ2è¿›åˆ¶5ä½  32ä½å‡æ‰1ä½ 31ä¸ª\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" workerId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ•°æ®ä¸­å¿ƒID(0~31)ï¼Œ2è¿›åˆ¶5ä½  32ä½å‡æ‰1ä½ 31ä¸ª\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" datacenterId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æ¯«ç§’å†…åºåˆ—(0~4095)ï¼Œ2è¿›åˆ¶12ä½ 4096 - 1 = 4095ä¸ª\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * ä¸Šæ¬¡æ—¶é—´æˆ³ï¼Œåˆå§‹å€¼ä¸ºè´Ÿæ•°\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" lastTimestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ==============================Constructors=====================================")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æœ‰å‚æ„é€ \n     * @param workerId å·¥ä½œæœºå™¨ID(0~31)\n     * @param datacenterId æ•°æ®ä¸­å¿ƒID(0~31)\n     * @param sequence æ¯«ç§’å†…åºåˆ—(0~4095)\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SnowFlakeUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" workerId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" datacenterId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sequence"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sanity check for workerId")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" maxWorkerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" workerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalArgumentException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"worker Id can\'t be greater than %d or less than 0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("maxWorkerId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" maxDatacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" datacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalArgumentException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"datacenter Id can\'t be greater than %d or less than 0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("maxDatacenterId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"worker starting. timestamp left shift %d, datacenter id bits %d, worker id bits %d, sequence bits %d, workerid %d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                timestampLeftShift"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" datacenterIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" workerIdBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sequenceBits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" workerId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("workerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" workerId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datacenterId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sequence"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ==============================Methods==========================================")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * è·å¾—ä¸‹ä¸€ä¸ªID (è¯¥æ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„)\n     *  å¦‚æœä¸€ä¸ªçº¿ç¨‹åå¤è·å–Synchronizedé”ï¼Œé‚£ä¹ˆsynchronizedé”å°†å˜æˆåå‘é”ã€‚\n     * @return ç”Ÿæˆçš„ID\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼Œå•ä½ï¼ˆæ¯«ç§’ï¼‰")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeGen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰æ—¶é—´æˆ³å¦‚æœå°äºä¸Šæ¬¡æ—¶é—´æˆ³ï¼Œåˆ™è¡¨ç¤ºæ—¶é—´æˆ³è·å–å‡ºç°å¼‚å¸¸")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" lastTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å½“å‰æ—¶é—´æˆ³ä¸èƒ½å°äºä¸Šæ¬¡æ—¶é—´æˆ³ï¼Œä¸Šæ¬¡æ—¶é—´æˆ³ä¸ºï¼š %d."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lastTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å½“å‰æ—¶é—´æˆ³ä¸èƒ½å°äºä¸Šæ¬¡æ—¶é—´æˆ³ï¼Œç”ŸæˆIDå¤±è´¥. æ—¶é—´æˆ³å·®å€¼ï¼š %d milliseconds"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    lastTimestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰æ—¶é—´æˆ³å¦‚æœç­‰äºä¸Šæ¬¡æ—¶é—´æˆ³ï¼ˆåŒä¸€æ¯«ç§’å†…ï¼‰ï¼Œåˆ™åœ¨åºåˆ—å·åŠ ä¸€ï¼›å¦åˆ™åºåˆ—å·èµ‹å€¼ä¸º0ï¼Œä»0å¼€å§‹ã€‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lastTimestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* \n                é€»è¾‘ï¼šæ„æ€æ˜¯è¯´ä¸€ä¸ªæ¯«ç§’å†…æœ€å¤šåªèƒ½æœ‰4096ä¸ªæ•°å­—ï¼Œæ— è®ºä½ ä¼ é€’å¤šå°‘è¿›æ¥ï¼Œ\n                    è¿™ä¸ªä½è¿ç®—ä¿è¯å§‹ç»ˆå°±æ˜¯åœ¨4096è¿™ä¸ªèŒƒå›´å†…ï¼Œé¿å…ä½ è‡ªå·±ä¼ é€’ä¸ªsequenceè¶…è¿‡äº†4096è¿™ä¸ªèŒƒå›´\n            */")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// sequenceï¼šæ¯«ç§’å†…åºåˆ—(0~4095);  sequenceMask: åºåˆ—å·æœ€å¤§å€¼;")]),t._v("\n            sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" sequenceMask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* é€»è¾‘ï¼šå½“æŸä¸€æ¯«ç§’çš„æ—¶é—´ï¼Œäº§ç”Ÿçš„idæ•° è¶…è¿‡4095ï¼Œç³»ç»Ÿä¼šè¿›å…¥ç­‰å¾…ï¼Œç›´åˆ°ä¸‹ä¸€æ¯«ç§’ï¼Œç³»ç»Ÿç»§ç»­äº§ç”ŸID */")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tilNextMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lastTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            sequence "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†ä¸Šæ¬¡æ—¶é—´æˆ³å€¼åˆ·æ–°ï¼ˆé€»è¾‘ï¼šè®°å½•ä¸€ä¸‹æœ€è¿‘ä¸€æ¬¡ç”Ÿæˆidçš„æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼‰")]),t._v("\n        lastTimestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* æ ¸å¿ƒé€»è¾‘ï¼šç”Ÿæˆä¸€ä¸ª64bitçš„idï¼›\n                  å…ˆå°†å½“å‰æ—¶é—´æˆ³å·¦ç§»ï¼Œæ”¾åˆ°41 bité‚£å„¿ï¼›\n                  å°†æœºæˆ¿idå·¦ç§»æ”¾åˆ°5 bité‚£å„¿ï¼›\n                  å°†æœºå™¨idå·¦ç§»æ”¾åˆ°5 bité‚£å„¿ï¼›\n                  å°†åºå·æ”¾æœ€å12 bit\n                  æœ€åæ‹¼æ¥èµ·æ¥æˆä¸€ä¸ª64 bitçš„äºŒè¿›åˆ¶æ•°å­—ï¼Œè½¬æ¢æˆ10è¿›åˆ¶å°±æ˜¯ä¸ªlongå‹ */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n         * è¿”å›ç»“æœï¼š\n         * (timestamp - twepoch) << timestampLeftShift) è¡¨ç¤ºå°†æ—¶é—´æˆ³å‡å»åˆå§‹æ—¶é—´æˆ³ï¼Œå†å·¦ç§»ç›¸åº”ä½æ•°\n         * (datacenterId << datacenterIdShift) è¡¨ç¤ºå°†æ•°æ®idå·¦ç§»ç›¸åº”ä½æ•°\n         * (workerId << workerIdShift) è¡¨ç¤ºå°†å·¥ä½œidå·¦ç§»ç›¸åº”ä½æ•°\n         * | æ˜¯æŒ‰ä½æˆ–è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ï¼šx | yï¼Œåªæœ‰å½“xï¼Œyä¸ä¸º0çš„æ—¶å€™ç»“æœæ‰ä¸º0ï¼Œå…¶å®ƒæƒ…å†µç»“æœéƒ½ä¸º1ã€‚\n         * å› ä¸ºä¸ªéƒ¨åˆ†åªæœ‰ç›¸åº”ä½ä¸Šçš„å€¼æœ‰æ„ä¹‰ï¼Œå…¶å®ƒä½ä¸Šéƒ½æ˜¯0ï¼Œæ‰€ä»¥å°†å„éƒ¨åˆ†çš„å€¼è¿›è¡Œ | è¿ç®—å°±èƒ½å¾—åˆ°æœ€ç»ˆæ‹¼æ¥å¥½çš„id\n         */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" twepoch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" timestampLeftShift"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datacenterId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" dataCenterIdShift"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workerId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" workerIdShift"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n                sequence"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * ä¸Šæ¬¡æ—¶é—´æˆ³ä¸å½“å‰æ—¶é—´æˆ³è¿›è¡Œæ¯”è¾ƒ\n     * é€»è¾‘ï¼šå½“æŸä¸€æ¯«ç§’çš„æ—¶é—´ï¼Œäº§ç”Ÿçš„idæ•° è¶…è¿‡4095ï¼Œç³»ç»Ÿä¼šè¿›å…¥ç­‰å¾…ï¼Œç›´åˆ°ä¸‹ä¸€æ¯«ç§’ï¼Œç³»ç»Ÿç»§ç»­äº§ç”ŸID\n     * @param lastTimestamp ä¸Šæ¬¡æ—¶é—´æˆ³\n     * @return è‹¥å½“å‰æ—¶é—´æˆ³å°äºç­‰äºä¸Šæ¬¡æ—¶é—´æˆ³ï¼ˆæ—¶é—´å›æ‹¨äº†ï¼‰ï¼Œåˆ™è¿”å›æœ€æ–°å½“å‰æ—¶é—´æˆ³ï¼› å¦åˆ™ï¼Œè¿”å›å½“å‰æ—¶é—´æˆ³\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tilNextMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" lastTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeGen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" lastTimestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeGen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * è·å–ç³»ç»Ÿæ—¶é—´æˆ³\n     * @return å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ 14ä½\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeGen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SnowFlakeUtil")]),t._v(" snowFlakeUtil "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SnowFlakeUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("snowFlakeUtil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeGen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"é›ªèŠ±ç®—æ³•ç”Ÿæˆç¬¬ã€"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ã€‘ä¸ªID:"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" snowFlakeUtil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä»£ç è§£é‡Šçš„å¾ˆè¯¦ç»†ï¼Œæˆ‘éå¸¸å–œæ¬¢è¿™ç§ä»£ç æ³¨é‡Šè¯¦ç»†çš„ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);